# Oracle

FastAPI wrapper for Anya


### Run

First, make sure your device is plugged and running in [Anya mode](https://github.com/NyanSatan/Anya#usage-1).

With poetry :
- Install `poetry` with pip
- Run `poetry run oracle/main.py`

Then try it: 
```
λ ~/19F77 » img4 -i iBEC.n841.RELEASE.im4p -b        
E3159D0D1836974F36FC031C2E0A9AEE921D244C9ABFA936D3E166C2F8E9A946D27573B2BB9CF4BA322B96C0874D69CF
02C85C274A39093F65DAC9BFD470ECACE71B0906B8C98EFFB9FFD039C697089A7B8471CB70B31AF3A922A527B027ADE9
λ ~/19F77 » curl -s matteyeux.keys:5555/decrypt/8020/02C85C274A39093F65DAC9BFD470ECACE71B0906B8C98EFFB9FFD039C697089A7B8471CB70B31AF3A922A527B027ADE9 | jq .
{
  "kbag": "02C85C274A39093F65DAC9BFD470ECACE71B0906B8C98EFFB9FFD039C697089A7B8471CB70B31AF3A922A527B027ADE9",
  "key": "AD1F3B06BE0ADB0D9DC43AF6C9E5D5A690378F25DF719BB80D5A98D9F63194236A7AEEEFA6E7458C42E3EBAFF4E3A7A9"
}
λ ~/19F77 » img4 -i sep-firmware.n841.RELEASE.im4p -b
0D9F4E2BE1E4A78DC45F0376BC064186AE883765EC5E382BBBF7AFA6088A0252E644CB894C2CFA4F43D2941D5DCBFC7F
3E59AF67E15C4CA23FEC30466927FEBD8F959471414BC643E4545D0299AA486B57338819D7D514B2C60351CD2D6ADFB0
λ ~/19F77 » curl -s matteyeux.keys:5555/decrypt/8020/sep/3E59AF67E15C4CA23FEC30466927FEBD8F959471414BC643E4545D0299AA486B57338819D7D514B2C60351CD2D6ADFB0 | jq .
{
  "kbag": "3E59AF67E15C4CA23FEC30466927FEBD8F959471414BC643E4545D0299AA486B57338819D7D514B2C60351CD2D6ADFB0",
  "key": "A1B32444E041EE9DD66E2BF536FE5975BA12262C21E80655093B066493AE5ECBC26FC7C0C44B327D5DA1CD34DE73AB1F"
}
```



### udev rule

If you are on a Linux machine, copy `67-anya.rules` to `/etc/udev/rules.d` to not run the API as root.




